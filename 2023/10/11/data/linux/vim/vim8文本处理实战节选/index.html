<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon.ico">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/blog/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="article">
<meta property="og:title" content="vim8文本处理实战节选">
<meta property="og:url" content="http://example.com/2023/10/11/data/linux/vim/vim8%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%AE%9E%E6%88%98%E8%8A%82%E9%80%89/index.html">
<meta property="og:site_name" content="Code Blog">
<meta property="og:locale">
<meta property="article:published_time" content="2023-10-11T15:54:36.000Z">
<meta property="article:modified_time" content="2023-10-11T15:54:36.000Z">
<meta property="article:author" content="Fredom Fu">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="vim">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2023/10/11/data/linux/vim/vim8%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%AE%9E%E6%88%98%E8%8A%82%E9%80%89/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh'
  };
</script>

  <title>vim8文本处理实战节选 | Code Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Code Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Code Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/blog/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/ChenXinXuTUSC" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/11/data/linux/vim/vim8%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%AE%9E%E6%88%98%E8%8A%82%E9%80%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Fredom Fu">
      <meta itemprop="description" content="Code Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          vim8文本处理实战节选
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-10-11 23:54:36" itemprop="dateCreated datePublished" datetime="2023-10-11T23:54:36+08:00">2023-10-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          
            <div class="post-description"> </div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>通过阅读本章，读者将能更加得心应手地在日常任务中使用Vim。本章使用一个<a
target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Python&amp;spm=1001.2101.3001.7020">Python</a>工程作为示例，模拟了一系列日常编码的场景。当然，读者完全可以拿自己手头的项目练手；只不过，本章中的使用场景不一定都适用于读者自己的代码。</p>
<p>本章包括如下主题。</p>
<ul>
<li>介绍一种粗暴但快捷的Vim插件安装方式。<br />
</li>
<li>介绍如何使用缓冲区、窗口、标签页和折叠来处理多个文件或长文件，从而使工作区更为整洁。<br />
</li>
<li>介绍插件Netrw、NERDTree、Vinegar和CtrlP，通过这些插件，读者可以在不退出Vim的情况下浏览复杂的文件树。<br />
</li>
<li>介绍文件中的高级文本浏览方式、极其高效的光标移动插件EasyMotion以及多种文本对象，介绍通过grep和ack实现跨文件的搜索。<br />
</li>
<li>介绍如何利用寄存器来复制和粘贴。</li>
</ul>
<h1 id="技术要求">1　技术要求</h1>
<p>本章将介绍如何用Vim在一个Python工程上作业。读者可以在异步社区中找到本章用到的代码。</p>
<h1 id="安装插件">2　安装插件</h1>
<p>本章会介绍几个Vim插件，但暂时不会涉及较为复杂的插件管理，相关的内容参见第3章。</p>
<p>首先，读者必须要做好准备工作。</p>
<p>1．创建一个存储插件的目录，执行下列命令。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> -p ~/.vim/pack/plugins/start</span><br></pre></td></tr></table></figure>
<p>如果在Windows系统中使用gVim，则需要在用户目录(通常是C:甥敳獲
)下创建vimfiles目录，然后在其中创建子目录pack plugins start。</p>
<p>2．使Vim能够自动加载每个插件的文档(Vim默认不会这么做)。在~/.vimrc文件(在Windows系统中为用户目录下的_vimrc文件)中添加下列代码。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">packloadall               <span class="string">&quot; 加载所有插件silent! helptags ALL      &quot;</span> 为所有插件加载帮助文档</span><br></pre></td></tr></table></figure>
<p>然后，每次安装插件都可按照下列步骤进行。</p>
<p>1．在 GitHub
上找到想要安装的插件。比如，读者想安装<code>scrooloose/nerdtree</code>(注意，这里的<code>scrooloose/nerdtree</code>为该GitHub仓库的唯一标识，实际地址为
https://github.com/scrooloose/nerdtree.git
)。假设读者已经安装了Git，则可以找到此Git仓库的克隆地址，然后运行如下命令。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/scrooloose/nerdtree.git ~/.vim/pack/plugins/start/nerdtree</span><br></pre></td></tr></table></figure>
<p>如果读者没有安装Git，或者在Windows系统中使用gVim，则可以在GitHub页面上找到
<strong>克隆或下载(Clone or download)</strong>
按钮，下载ZIP压缩包，然后将其解压到相应的插件目录中，比如在Linux系统中为目录<code>~/.vim/pack/ plugins/start/nerdtree</code>，而在Windows系统中为用户目录下的子目录<code>vimfiles/pack/plugins/start/nerdtree</code>。</p>
<p>2．重启Vim之后，即可使用插件进行相关操作。</p>
<h1 id="组织工作区">3　组织工作区</h1>
<p>到目前为止，本书还只是用Vim处理单个文件。但是在编写程序时，经常需要同时处理多个文件，涉及来回切换、跨文件编辑或到其他界面查询资料等操作。幸运的是，Vim提供了一个能够处理多个文件的插件。</p>
<ul>
<li>Vim内部用缓冲区来表示文件；通过缓冲区，读者可以在不同文件之间快速切换。<br />
</li>
<li>Vim用多个窗口在同一屏幕中显示多个文件。<br />
</li>
<li>Vim用标签页对窗口进行分组。<br />
</li>
<li>Vim用折叠效果来隐藏或展开一个文件的部分内容，从而让读者可以更容易地浏览文件的内容。</li>
</ul>
<p>图1中展示了上述要点，解释如下。</p>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/ffd09a66fc89d4b124da5e8db84def86.png"
alt="ffd09a66fc89d4b124da5e8db84def86.png" />
<figcaption
aria-hidden="true">ffd09a66fc89d4b124da5e8db84def86.png</figcaption>
</figure>
<p>图1</p>
<ul>
<li>多个窗口用于同时打开多个文件(farm.py、animal/cat.py和animal_farm.py)。<br />
</li>
<li>顶部显示有两个标签页(3 farm.py和a/dog.py)。<br />
</li>
<li>以+--开头的行表示折叠，它隐藏了文件的部分内容。</li>
</ul>
<p>本节将详细介绍窗口、标签页和折叠，通过这些功能，读者可以在工作中同时处理任意多个文件。</p>
<h1 id="缓冲区">3.1　缓冲区</h1>
<p>缓冲区是文件的内部表示，每个打开的文件都有一个缓冲区。比如，通过命令行vim
animal_farm.py打开一个文件，然后可以用:ls命令看到现有的缓冲区列表。</p>
<p>很多命令都有别名或等价命令，:ls也不例外，它和:buffers及:files实现的是同样的功能，读者可以从中选择一个最容易记的命令。</p>
<p>图2所示为ls命令的执行结果(最下面的那3行)。</p>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/90e48a55f0e640db6701c33b8349220a.png"
alt="90e48a55f0e640db6701c33b8349220a.png" />
<figcaption
aria-hidden="true">90e48a55f0e640db6701c33b8349220a.png</figcaption>
</figure>
<p>图2</p>
<p>图2.2中的状态栏显示了已经打开的缓冲区(这里只有一个)的相关信息，这些信息的含义如下。</p>
<ul>
<li>1为缓冲区编号，在整个Vim会话中，它的值保持不变。<br />
</li>
<li>% 表示该缓冲区位于当前窗口中。<br />
</li>
<li>a 表示该缓冲区处于活动状态，即它已被加载并可见。<br />
</li>
<li>"animal_farm.py"为文件名。<br />
</li>
<li>line 30表示当前光标位置。</li>
</ul>
<p>现在，用下列命令打开另一个文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:e animals/cat.py</span><br></pre></td></tr></table></figure>
<p>然后，可以看到之前打开的文件已经被当前文件所取代。不过，animal_farm.py仍然存储在某个缓冲区中，读者可以再次用:ls命令将其显示出来。</p>
<p>现在，可以看到两个文件名都被列出来了，如图3所示。</p>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/2a54c10dd57094b7b09d2880a88787d7.png"
alt="2a54c10dd57094b7b09d2880a88787d7.png" />
<figcaption
aria-hidden="true">2a54c10dd57094b7b09d2880a88787d7.png</figcaption>
</figure>
<p>图3</p>
<p>那么怎样才能跳转到之前的文件呢？</p>
<p>Vim通过数字和名称来标识每个缓冲区，在同一个Vim会话中，它们都是唯一的(除非退出Vim)。为了在不同的缓冲区之间切换，可使用:b命令，其参数为缓冲区的编号数字。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:<span class="selector-tag">b</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>:b 1命令中的空格可以省略，得到简化版的命令:b1。</p>
<p>通过一条很简单的命令就可以回到原来的文件。由于缓冲区还可以用文件名来标识，因此读者可以用文件名的一部分来切换缓冲区。下列命令将打开animals/cat.py的缓冲区。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:<span class="selector-tag">b</span> <span class="selector-tag">cat</span></span><br></pre></td></tr></table></figure>
<p>不过，如果名称匹配了多个缓冲区，则Vim会报错。比如，用下面的命令查找所有文件名包含py的缓冲区。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:<span class="selector-tag">b</span> <span class="selector-tag">py</span></span><br></pre></td></tr></table></figure>
<p>Vim的状态栏中会显示错误，如图4所示。</p>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/e6419b42b1bce0be22764402f7e6db64.png"
alt="e6419b42b1bce0be22764402f7e6db64.png" />
<figcaption
aria-hidden="true">e6419b42b1bce0be22764402f7e6db64.png</figcaption>
</figure>
<p>图4</p>
<p>为解决这个问题，可以使用Tab键补全文件名，从而实现在不同缓冲区之间循环切换。输入:b
py(先不要按Enter键)，然后按Tab键，在所有匹配的结果之间循环遍历。</p>
<p>读者也可以使用:bn(:bnext)和:bp(:bprevious)命令循环遍历缓冲区。</p>
<p>当不再需要某缓冲区的时候(如不再需要编辑该文件)，可以将其删除。通过如下命令可以将一个缓冲区从打开的缓冲区列表中删除，而无须退出Vim。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">:bd</span></span><br></pre></td></tr></table></figure>
<p>但如果没有保存当前缓冲区，则Vim会报错。因此，在不小心删除缓冲区之前，读者还有一次保存文件的机会。</p>
<h1 id="插件unimpaired">3.2　插件——unimpaired</h1>
<p>Tim
Pope的vim-unimpaired是一个Vim插件,它为很多内置命令(以及一些新的命令)添加映射。本书作者每天都会使用这个插件，因为它提供了更为直观的映射，比如]b和[b用于循环遍历缓冲区，]f和[f用于遍历目录中的文件。该插件可以在GitHub仓库tpope/vim-unimpaired中找到(安装方法参见本章2.2节)。</p>
<p>下面是vim-unimpaired提供的部分映射。</p>
<ul>
<li>]b和[b循环遍历缓冲区。<br />
</li>
<li>]f和[f循环遍历同一目录中的文件，并打开为当前缓冲区。<br />
</li>
<li>]l和[l遍历位置列表(参见第5章)。<br />
</li>
<li>]q和[q遍历快速修复列表(参见第5章)。<br />
</li>
<li>]t和[t遍历标签列表(参见第4章)。</li>
</ul>
<p>此插件还支持用少数几次按键来切换某些选项，比如yos切换拼写检查，或yoc切换光标行高亮显示。更多功能参见:help
unimpaired中vim-unimpaired所提供的完整映射和功能清单。</p>
<h1 id="窗口">3.3　窗口</h1>
<p>Vim将缓冲区加载到窗口中。一个屏幕上可以同时显示多个窗口，它们将屏幕分割成几块。</p>
<p><strong>1．窗口的创建、删除和跳转</strong></p>
<p>本节将介绍Vim窗口的使用方式。首先，打开animal_farm.py文件(在命令行中执行$
vim animal_farm.py或从Vim中执行:e animal_farm.py)。</p>
<p>然后，使用如下命令将窗口分割成两个，其中一个显示新的文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:<span class="built_in">split</span> animals/cat.py</span><br></pre></td></tr></table></figure>
<p>:split命令可以简化为:sp。</p>
<p>可以看到animals/cat.py被打开，显示在原文件上方的窗口中，而且光标也出现在里面，如图5所示。</p>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/9e390ff75df4bc5b6a5e1bae9f99593d.png"
alt="9e390ff75df4bc5b6a5e1bae9f99593d.png" />
<figcaption
aria-hidden="true">9e390ff75df4bc5b6a5e1bae9f99593d.png</figcaption>
</figure>
<p>图5</p>
<p>也可以使用下面的命令按水平方向分割窗口。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">:vsplit</span> farm.py</span><br></pre></td></tr></table></figure>
<p>如图6所示，当前窗口又水平分隔出一个新的窗口(光标也随之移动到左边的新窗口中)。</p>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/ad302e7b809816bb1fa99f857e921677.png"
alt="ad302e7b809816bb1fa99f857e921677.png" />
<figcaption
aria-hidden="true">ad302e7b809816bb1fa99f857e921677.png</figcaption>
</figure>
<p>图6</p>
<p>:vs是:vsplit的简化版。</p>
<p>通过组合:split和:vsplit，可以生成任意多个窗口。</p>
<p>目前本书提到的所有命令都适用于窗口，包括切换缓冲区。为了使光标能在不同窗口间移动，先按Ctrl
+ w组合键，然后输入一个方向键：h、j、k、l中的一个或键盘方向键。</p>
<p>按Ctrl + h组合键，之后再按Ctrl + j组合键(Ctrl键可以不松开，记为Ctrl +
w,j组合键)，光标会进入下面的窗口，而使用Ctrl +
w,k组合键则进入上面的窗口。</p>
<p>如果经常使用窗口，读者可以按照如下配置绑定快捷键。" 使用 +
hjkl快速在窗口间跳转 noremap noremap noremap noremap</p>
<p>然后，就可以用Ctrl + h组合键跳到左边的窗口，用Ctrl +
j组合键跳到底部的窗口，依此类推。</p>
<p>读者可以用下列方式来关闭窗口。</p>
<ul>
<li>使用Ctrl + w,q组合键关闭当前窗口。<br />
</li>
<li>使用:q命令关闭窗口并卸载缓冲区；不过，当只有一个窗口打开的时候，这会导致退出Vim。<br />
</li>
<li>使用:bd命令删除当前缓冲区，并关闭当前窗口。<br />
</li>
<li>使用Ctrl +
w,o组合键(或:only，或:on命令)关闭除当前窗口之外的所有窗口。</li>
</ul>
<p>当打开了多个窗口时，可通过:qa命令关闭所有窗口并退出。也可以结合:w命令，即:wqa，它会先保存所有打开的文件，再退出Vim。</p>
<p>如果只想关闭缓冲区，而保留它所在的窗口，则可以在.vimrc文件中加入如下配置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot; 关闭缓冲区而不关闭窗口command! Bd :bp | :sp | :bn | :bd</span><br></pre></td></tr></table></figure>
<p>然后，读者就可以使用:Bd来关闭缓冲区，而保留分割窗口。</p>
<p><strong>2．窗口的移动</strong></p>
<p>窗口也可以移动、交换或改变大小。因为Vim中没有鼠标拖曳的功能，所以只能记住一些命令了。</p>
<p>读者并不需要记住所有这些命令，只要知道Vim支持哪些窗口操作，剩下的操作可以通过查看文档。使用:help
window-moving和:help window-
resize打开Vim手册中相应的条目，即可找到所有相关的快捷键。</p>
<p>窗口命令的快捷键都要先按Ctrl +
w组合键，后面跟一个大写的方向键(H、J、K和L中的一个)，当前窗口会被移动到相应的位置。</p>
<ul>
<li>使用Ctrl + w,H组合键将当前窗口移动到屏幕的最左边。<br />
</li>
<li>使用Ctrl + w,J组合键将当前窗口移动到屏幕的底部。<br />
</li>
<li>使用Ctrl + w,K组合键将当前窗口移动到屏幕的顶部。<br />
</li>
<li>使用Ctrl + w,L组合键将当前窗口移动到屏幕的最右边。</li>
</ul>
<p>比如图 7 所示的窗口布局(先打开animal_farm.py，然后再依次运行:sp
animals/cat.py和:vs farm.py，可得到这个布局)。</p>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/d9dac5d19679d31805b4eb1420aff38c.png"
alt="d9dac5d19679d31805b4eb1420aff38c.png" />
<figcaption
aria-hidden="true">d9dac5d19679d31805b4eb1420aff38c.png</figcaption>
</figure>
<p>图7</p>
<p>注意，图7中光标位于animals/cat.py文件所在的窗口中。通过前面介绍的几个快捷键，可以让这个窗口朝不同的方向移动。</p>
<ul>
<li>使用Ctrl +
w,H组合键将animals/cat.py移动到最左边，如图8(a)所示。<br />
</li>
<li>使用Ctrl +
w,J组合键将animals/cat.py移动到底部，而且左右分割变成了上下分割，如图8(b)所示。<br />
</li>
<li>使用Ctrl + w,K组合键将animals/cat.py移动到顶部，如图8(c)所示。<br />
</li>
<li>使用Ctrl +
w,L组合键将animals/cat.py移动到最右边，如图8(d)所示。</li>
</ul>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/af378d3237110a19eacccfe9ad676536.png"
alt="af378d3237110a19eacccfe9ad676536.png" />
<figcaption
aria-hidden="true">af378d3237110a19eacccfe9ad676536.png</figcaption>
</figure>
<ol type="a">
<li></li>
</ol>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/86c18600516b5a1680f5b17a3852eea2.png"
alt="86c18600516b5a1680f5b17a3852eea2.png" />
<figcaption
aria-hidden="true">86c18600516b5a1680f5b17a3852eea2.png</figcaption>
</figure>
<ol start="2" type="a">
<li></li>
</ol>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/7b3e70fc758439fedfac115696a2e464.png"
alt="7b3e70fc758439fedfac115696a2e464.png" />
<figcaption
aria-hidden="true">7b3e70fc758439fedfac115696a2e464.png</figcaption>
</figure>
<ol start="3" type="a">
<li></li>
</ol>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/f2e2feeff5b6950e1c1bd2221b73500b.png"
alt="f2e2feeff5b6950e1c1bd2221b73500b.png" />
<figcaption
aria-hidden="true">f2e2feeff5b6950e1c1bd2221b73500b.png</figcaption>
</figure>
<ol start="4" type="a">
<li></li>
</ol>
<p>图8</p>
<p>若想修改一个窗口的内容，则只需要跳转到这个窗口，然后用:b命令来选择所需的缓冲区。不过，也有一些快捷键可以用于交换两个窗口的内容。</p>
<ul>
<li>使用Ctrl +
w,r组合键将当前行或当前列(行优先于列)中的每个窗口的内容向右或向下移动。使用Ctrl
+ w,R组合键则以相反的方向执行类似的操作。<br />
</li>
<li>使用Ctrl +
w,x组合键将当前窗口与下一个窗口的内容交换(如果当前窗口是最后一个，则与前一个交换)。</li>
</ul>
<p>Vim内部用数字来标识窗口。不过，与缓冲区不同，窗口的编号是随着布局变化而改变的，而且并没有直接的方法来修改窗口编号。有些窗口管理命令以窗口编号为参数，但本书不会涉及这部分内容。有一条原则仅供参考，窗口编号顺序为由上至下、由左至右递增。</p>
<p><strong>3．改变窗口的大小</strong></p>
<p>Vim窗口默认的宽高比为50/50，这可能并不满足读者的需求，因此窗口的大小可以通过一些方法来改变。</p>
<p>快捷键Ctrl +
w,=(按Ctrl+w后再按=键)能够将所有打开窗口的宽和高调整为一致。如果不恰当地调整了窗口大小，这个命令将非常有用。</p>
<p>:resize命令会增加或减少当前窗口的高度，而:vertical
resize将调整窗口的宽度。读者还可以使用如下命令。</p>
<ul>
<li>:resize +N用于将当前窗口的高度增加N行。<br />
</li>
<li>:resize -N用于将当前窗口的高度减少N行。<br />
</li>
<li>:vertical resize +N用于将当前窗口的宽度增加N列。<br />
</li>
<li>:vertical resize -N用于将当前窗口的宽度减少N列。</li>
</ul>
<p>:resize和:vertical resize可分别简写为:res和:vert
res。另外，还有将窗口高度和宽度改变一行/列的快捷键：Ctrl + w,-和Ctrl +
w,+用于调整高度，而Ctrl+w,&gt;和Ctrl + w,</p>
<p>两种命令都可以将宽度/高度设置为具体的行数/列数。</p>
<ul>
<li>:resize N用于将窗口高度设置为N。<br />
</li>
<li>:vertical resize N用于将窗口宽度设置为N。</li>
</ul>
<h1 id="标签页">3.4　标签页</h1>
<p>在很多现代编辑器中，标签页(Tabs)用于表示不同的文件。在Vim中自然也是如此，但读者需要考虑其原始目的。</p>
<p>Vim用标签页来组织一个窗口的集合，进而支持在不同的窗口集合之间切换，这让用户方便地拥有了多个工作区。标签页通常用来在同一个Vim会话中区分不同的问题或者文件集合。标签页功能不一定是一个频繁使用的功能，但如果希望在不同项目或同一项目的不同上下文之间切换，那么标签页将是一个不错的选择。</p>
<p>用户愿意使用标签页的另一个原因可能与Vim的diff功能有关，因为diff作用于一个标签页内。更多详情请参考第5章中关于vimdiff的介绍。</p>
<p>在一个新标签页中打开一个空缓冲区的命令如下。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">:tabnew</span></span><br></pre></td></tr></table></figure>
<p>在新标签页中打开一个已有文件的命令为:tabnew 。</p>
<p>如图9所示，标签页显示在屏幕的顶部。在标记为3
farm.py的标签页中打开了三个窗口及一个活动缓冲区farm.py。[No
Name]标签页则是刚才打开过的空缓冲区。</p>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/1dec86ece1f794841956d1f8e8f8da14.png"
alt="1dec86ece1f794841956d1f8e8f8da14.png" />
<figcaption
aria-hidden="true">1dec86ece1f794841956d1f8e8f8da14.png</figcaption>
</figure>
<p>图9</p>
<p>在一个标签页中，可以通过常用的方式(:e
)来加载文件，也可以用:b命令在不同缓冲区之间切换。</p>
<p>为了在不同标签页之间跳转，可以使用如下命令。</p>
<ul>
<li>快捷键gt或:tabnext命令用于切换到下一个标签页。<br />
</li>
<li>快捷键gT或:tabprevious命令用于切换到上一个标签页。</li>
</ul>
<p>标签页可通过:tabclose命令来关闭，标签页关闭也会导致其中的窗口关闭(如果只剩一个标签页，则需要用:q来关闭)。</p>
<p>:tabmove
N命令将当前标签页移动到第N个标签页之后(如果N为0，则变成第一个标签页)。</p>
<h1 id="折叠">3.5　折叠</h1>
<p>Vim为浏览大型文件提供的一个强大工具是折叠。折叠功能支持文件部分内容的隐藏，隐藏的依据既可以是预定义的规则，也可以是手动添加的折叠标记。</p>
<p>如图10所示，animal_farm.py中的部分代码片断被折叠了，代码中每个方法的具体内容被隐藏了，从而可以在整体上来查看代码。</p>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/e8a0250d571833a9fbc3ed37861e17ac.png"
alt="e8a0250d571833a9fbc3ed37861e17ac.png" />
<figcaption
aria-hidden="true">e8a0250d571833a9fbc3ed37861e17ac.png</figcaption>
</figure>
<p>图10</p>
<p><strong>1．折叠Python代码</strong></p>
<p>因为本书以Python编程为例，所以这里只介绍Python示例代码的折叠方式。首先，需要在.vimrc文件中将foldmethod设置为indent，设置代码如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set foldmethod=indent</span><br></pre></td></tr></table></figure>
<p>不要忘记重新加载~/.vimrc，方法是重启Vim或在Vim中执行:source
$MYVIMRC命令。</p>
<p>设置foldmethod为indent，使Vim基于缩进来折叠代码。</p>
<p>再次打开animal_farm.py，可以看到该文件中的部分代码已经被隐藏，如图11所示。</p>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/e8a0250d571833a9fbc3ed37861e17ac.png"
alt="e8a0250d571833a9fbc3ed37861e17ac.png" />
<figcaption
aria-hidden="true">e8a0250d571833a9fbc3ed37861e17ac.png</figcaption>
</figure>
<p>图11</p>
<p>将光标移动到其中一个折叠行上，输入zo可以打开当前折叠，如图12所示。</p>
<figure>
<img
src="https://img-blog.csdnimg.cn/img_convert/4f5a6f5ef1d7322215c6f57fdaf19949.png"
alt="4f5a6f5ef1d7322215c6f57fdaf19949.png" />
<figcaption
aria-hidden="true">4f5a6f5ef1d7322215c6f57fdaf19949.png</figcaption>
</figure>
<p>图12</p>
<p>只要光标在一个潜在的折叠文本中(本例中为缩进的代码块)，输入zc都会将此折叠关闭。</p>
<p>为了方便看清折叠的位置，可以使用:set
foldcolumn=N命令，其中N的取值为0～12。这会告诉Vim用从屏幕左边开始的N列来标记折叠，其中符号-表示一个打开的折叠，符号|表示打开的折叠的内容，符号+表示关闭的折叠。</p>
<p>输入za可切换折叠状态(打开关闭的折叠或关闭打开的折叠)。输入zR和zM分别用于同时打开和关闭所有折叠。</p>
<p>将foldmethod设置为自动类型(如indent)会默认将所有文件折叠。这只是一种偏好，读者也可能会选择在打开新文件时打开折叠。在.vimrc文件中添加autocmd
BufRead * normal
zR会在打开新文件时令折叠处于打开状态，即Vim在读取新的缓冲区时执行zR命令(打开所有折叠)。</p>
<p><strong>2．折叠的类型</strong></p>
<p>从某种意义上来说，Vim在折叠代码方面是比较智能的，而且支持多种折叠方式。折叠的方法由.vimrc文件中的foldmethod选项来指定。Vim支持如下折叠方式。</p>
<ul>
<li>manual：手动折叠，这种方法对于长文本而言并不适用。<br />
</li>
<li>indent：基于缩进的折叠，这对于依赖缩进的编程语言非常合适(不管哪种语言，标准的编码风格中总是会采用某种一致性的缩进。因此，当读者想要快速隐藏不关心的代码时，indent折叠方式不失为一种高效率的选择)。<br />
</li>
<li>expr：基于正则表达式的折叠。如果读者想要用复杂的规则来定义折叠，那么可以选择这种方式。<br />
</li>
<li>marker：使用文本中特殊的标记来定义折叠，比如<code>&#123;&#123;&#123;`和`&#125;&#125;&#125;</code>。这种方法对于管理很长的.vimrc文件非常有效，但是在Vim之外不常用，因为这种方式需要修改文件内容。<br />
</li>
<li>syntax提供了可识别语法的折叠，但它并非对所有语言都开箱即用(不支持Python)。<br />
</li>
<li>diff：当Vim处于diff模式时会自动采用这种折叠方式，diff模式下需要展示两个文件的不同之处，而相同之处往往需要隐藏起来(参见第5章)。</li>
</ul>
<p>设置折叠方式的方法为在.vimrc文件中加入set foldmethod=。</p>
<h1 id="文件树的浏览">4　文件树的浏览</h1>
<p>软件项目往往包含大量的文件和目录，能够利用Vim快速浏览和展示这些文件和目录将是一件很方便的事。本节介绍5种不同的文件浏览方式，它们分别是内置的Netrw文件管理器、启用了wildmenu的:e命令、NERDTree、Vinegar和CtrlP插件。这些方式都可用于处理文件，并可按需求组合使用。</p>
<h1 id="本文截选自vim-8文本处理实战">本文截选自《Vim
8文本处理实战》</h1>
<ul>
<li>Vim8文本处理技术指南，vim实用技巧<br />
</li>
<li>文本编辑器书籍<br />
</li>
<li>程序员编程开发技能，python语言结合</li>
</ul>
<p>作为全面介绍Vim使用方法的教程，本书介绍了各种常用的文本编辑方法和程序设计中的实用操作，深入Vim内部的数据结构和VimScript脚本编程，内容详实。本书基于Vim
8平台，介绍了前沿分支Neovim，还推荐了更先进的Oni编辑器，兼容并包，集Vim社区典型使用经验和发展趋势于一体。</p>
<p>本书面向的读者群体是所有使用Vim的程序员，书中的示例文本为Python代码，并详细介绍了Git和正则表达式。读者需要对操作系统和程序设计有基本的了解，特别是需要了解Linux操作系统的基本使用。虽然本书尝试兼顾三大操作系统，但毫无疑问书中内容以Linux为主。本书可以帮助读者完善Vim技能，增加程序设计的知识储备。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/blog/tags/linux/" rel="tag"># linux</a>
              <a href="/blog/tags/vim/" rel="tag"># vim</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/2023/10/11/data/linux/vim/vim%E7%BB%88%E7%AB%AF%E5%88%87%E6%8D%A2%E6%BB%9A%E5%B1%8F/" rel="prev" title="vim终端切换滚屏">
      <i class="fa fa-chevron-left"></i> vim终端切换滚屏
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/2023/10/11/data/linux/vim/vim7%E5%8D%87%E7%BA%A7vim8/" rel="next" title="vim7升级vim8">
      vim7升级vim8 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8A%80%E6%9C%AF%E8%A6%81%E6%B1%82"><span class="nav-number">1.</span> <span class="nav-text">1　技术要求</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6"><span class="nav-number">2.</span> <span class="nav-text">2　安装插件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BB%84%E7%BB%87%E5%B7%A5%E4%BD%9C%E5%8C%BA"><span class="nav-number">3.</span> <span class="nav-text">3　组织工作区</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BC%93%E5%86%B2%E5%8C%BA"><span class="nav-number">4.</span> <span class="nav-text">3.1　缓冲区</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8F%92%E4%BB%B6unimpaired"><span class="nav-number">5.</span> <span class="nav-text">3.2　插件——unimpaired</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AA%97%E5%8F%A3"><span class="nav-number">6.</span> <span class="nav-text">3.3　窗口</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A0%87%E7%AD%BE%E9%A1%B5"><span class="nav-number">7.</span> <span class="nav-text">3.4　标签页</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8A%98%E5%8F%A0"><span class="nav-number">8.</span> <span class="nav-text">3.5　折叠</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%A0%91%E7%9A%84%E6%B5%8F%E8%A7%88"><span class="nav-number">9.</span> <span class="nav-text">4　文件树的浏览</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9C%AC%E6%96%87%E6%88%AA%E9%80%89%E8%87%AAvim-8%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%AE%9E%E6%88%98"><span class="nav-number">10.</span> <span class="nav-text">本文截选自《Vim
8文本处理实战》</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Fredom Fu</p>
  <div class="site-description" itemprop="description">Code Blog</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">315</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">56</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fredom Fu</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/pjax/pjax.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/muse.js"></script>


<script src="/blog/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/blog/js/local-search.js"></script>













    <div id="pjax">
  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '32px',
  right: '32px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#100f2c',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script>

    </div>
</body>
</html>
